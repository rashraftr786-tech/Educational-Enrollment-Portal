<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Quest: One by One!</title>
    <style>
        body { font-family: 'Comic Sans MS', cursive, sans-serif; background-color: #fffae6; text-align: center; padding: 20px; overflow-x: hidden; }
        
        #game-container { max-width: 500px; margin: 50px auto; background: white; padding: 40px; border-radius: 40px; border: 8px solid #FF9800; box-shadow: 0 10px 0 #e68a00; position: relative; }

        .score-box { background: #FFD700; padding: 10px 20px; border-radius: 20px; font-size: 1.8rem; font-weight: bold; margin-bottom: 20px; display: inline-block; border: 3px solid #b8860b; }

        .level-badge { background: #9c27b0; color: white; padding: 5px 15px; border-radius: 10px; font-size: 1.2rem; margin-bottom: 10px; }

        /* Borrowing Boxes */
        .regroup-row { display: flex; justify-content: center; gap: 20px; margin-bottom: 10px; padding-left: 40px; }
        .regroup-box { width: 45px; height: 45px; border: 3px dashed #ff9800; border-radius: 8px; text-align: center; color: #ff9800; font-size: 1.5rem; background: #fffcf0; font-weight: bold; outline: none; }

        .math-display { font-size: 4.5rem; font-weight: bold; text-align: right; font-family: 'Courier New', monospace; line-height: 1.1; margin: 20px 0; padding-right: 40px; letter-spacing: 15px; }

        .divider { border-bottom: 8px solid #333; margin: 10px 0; border-radius: 10px; }

        input[type="number"] { width: 100%; font-size: 4rem; text-align: center; border: 5px solid #ccc; border-radius: 20px; padding: 10px; margin: 20px 0; outline: none; }

        .btn { border: none; padding: 15px 40px; font-size: 1.8rem; border-radius: 20px; cursor: pointer; font-weight: bold; transition: transform 0.2s; color: white; }
        #check-btn { background: #2196F3; box-shadow: 0 6px 0 #1976D2; }
        #next-btn { background: #4CAF50; box-shadow: 0 6px 0 #388E3C; display: none; margin-top: 20px; width: 100%; }
        .btn:active { transform: translateY(4px); box-shadow: none; }

        .prompt { min-height: 60px; font-size: 1.8rem; font-weight: bold; margin-top: 20px; padding: 10px; border-radius: 15px; }
        .success-prompt { color: #2e7d32; background: #e8f5e9; border: 2px solid #2e7d32; }
        .fail-prompt { color: #d32f2f; background: #ffebee; border: 2px solid #d32f2f; }
        
        .progress { font-size: 1rem; color: #666; margin-top: 10px; }
    </style>
</head>
<body>

    <div class="score-box">‚≠ê Total Stars: <span id="stars">0</span></div>

    <div id="game-container">
        <div id="level-indicator" class="level-badge">Level 1: Easy</div>
        
        <div id="borrow-area" class="regroup-row">
            <input type="text" class="regroup-box" maxlength="2">
            <input type="text" class="regroup-box" maxlength="2">
            <input type="text" class="regroup-box" maxlength="2">
            <input type="text" class="regroup-box" maxlength="2">
        </div>

        <div class="math-display" id="problem-text">0000<br>- 0000</div>
        <div class="divider"></div>
        
        <input type="number" id="user-input" placeholder="????">
        
        <button id="check-btn" class="btn" onclick="checkAnswer()">Check Answer!</button>
        <div id="prompt-display" class="prompt"></div>
        <button id="next-btn" class="btn" onclick="nextQuestion()">Next Question ‚ûî</button>

        <div class="progress">Question <span id="current-q">1</span> of 40</div>
    </div>

    <script>
        const problems = [
            // 20 Without Regrouping
            {a: 9876, b: 1234, reg: false}, {a: 8594, b: 2130, reg: false}, {a: 7765, b: 4321, reg: false}, {a: 6982, b: 5471, reg: false}, {a: 5544, b: 2233, reg: false},
            {a: 9999, b: 1111, reg: false}, {a: 8765, b: 3042, reg: false}, {a: 6432, b: 5121, reg: false}, {a: 7890, b: 5670, reg: false}, {a: 4567, b: 1234, reg: false},
            {a: 9283, b: 4172, reg: false}, {a: 8888, b: 4444, reg: false}, {a: 7654, b: 2321, reg: false}, {a: 6543, b: 1210, reg: false}, {a: 5978, b: 2634, reg: false},
            {a: 9345, b: 1234, reg: false}, {a: 8721, b: 5610, reg: false}, {a: 7439, b: 2128, reg: false}, {a: 6854, b: 3721, reg: false}, {a: 5999, b: 4888, reg: false},
            // 20 With Regrouping
            {a: 5231, b: 2845, reg: true}, {a: 9000, b: 4567, reg: true}, {a: 7123, b: 3456, reg: true}, {a: 6412, b: 1823, reg: true}, {a: 8245, b: 3756, reg: true},
            {a: 4321, b: 1982, reg: true}, {a: 5555, b: 2777, reg: true}, {a: 8010, b: 3456, reg: true}, {a: 7421, b: 5634, reg: true}, {a: 6111, b: 2888, reg: true},
            {a: 9342, b: 4567, reg: true}, {a: 5005, b: 1236, reg: true}, {a: 7234, b: 4567, reg: true}, {a: 8111, b: 3222, reg: true}, {a: 4210, b: 1567, reg: true},
            {a: 6325, b: 2748, reg: true}, {a: 9102, b: 4356, reg: true}, {a: 7000, b: 2999, reg: true}, {a: 8432, b: 4567, reg: true}, {a: 5221, b: 1888, reg: true}
        ];

        let currentIndex = 0;
        let totalStars = 0;
        const successPhrases = ["BOOM! You're a Genius!", "WOW! Super Math Skills!", "AMAZING! Keep it up!", "STUNNING! You got it!", "YOU ROCK! 5 Stars for you!"];
        const failPhrases = ["Oops! Let's check that again!", "Not quite, try one more time!", "Almost! Keep going!", "Try again, you can do it!", "Give it another look!"];

        function loadQuestion() {
            const q = problems[currentIndex];
            document.getElementById('problem-text').innerHTML = `${q.a}<br>- ${q.b}`;
            document.getElementById('user-input').value = '';
            document.getElementById('prompt-display').innerHTML = '';
            document.getElementById('prompt-display').className = 'prompt';
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('check-btn').style.display = 'inline-block';
            document.getElementById('current-q').innerText = currentIndex + 1;
            
            // Show/Hide Borrowing Boxes
            document.getElementById('borrow-area').style.visibility = q.reg ? 'visible' : 'hidden';
            document.getElementById('level-indicator').innerText = q.reg ? 'Level 2: Borrowing Power' : 'Level 1: Super Easy';
            document.getElementById('level-indicator').style.background = q.reg ? '#9c27b0' : '#4caf50';
            
            // Clear borrow boxes
            const boxes = document.querySelectorAll('.regroup-box');
            boxes.forEach(b => b.value = '');
        }

        function checkAnswer() {
            const q = problems[currentIndex];
            const userVal = parseInt(document.getElementById('user-input').value);
            const prompt = document.getElementById('prompt-display');
            
            if (userVal === (q.a - q.b)) {
                totalStars += 5;
                document.getElementById('stars').innerText = totalStars;
                prompt.innerText = successPhrases[Math.floor(Math.random() * successPhrases.length)];
                prompt.className = 'prompt success-prompt';
                document.getElementById('next-btn').style.display = 'block';
                document.getElementById('check-btn').style.display = 'none';
            } else {
                prompt.innerText = failPhrases[Math.floor(Math.random() * failPhrases.length)];
                prompt.className = 'prompt fail-prompt';
            }
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < problems.length) {
                loadQuestion();
            } else {
                document.getElementById('game-container').innerHTML = `<h1>üèÜ YOU FINISHED!</h1><p style="font-size:2rem">You earned ${totalStars} Stars!</p><button class="btn" style="background:#2196F3" onclick="location.reload()">Play Again</button>`;
            }
        }

        loadQuestion();
    </script>
</body>
</html>
                    
